<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>

</html>
<script>


    const arr = [
        {
            "answerId": -1,
            "children": [
                {
                    "answerId": -1,
                    "children": [
                        {
                            "answerId": -1,
                            "children": [],
                            "hit": false,
                            "id": 8351072,
                            "idPath": "8350641/8351074",
                            "name": "测试规则1-2-1",
                            "namePath": "测试规则1/测试规则1-1/测试规则1-2-1",
                            "orderIndex": 3,
                            "parentId": 8351073,
                            "refCode": "a3271d0d9f9e43b3b81c8473b36b2227",
                            "type": 1,
                            "click": true,
                            "answers": [
                                {
                                    "answerInfo": {
                                        "answerId": 6613347,
                                        "answerTypes": [],
                                        "classifierId": 1361021,
                                        "classifierNodeId": 8361391,
                                        "extraData": {
                                            "clientType": "WEB",
                                            "eventSummary": "[]",
                                            "isShortMessage": false,
                                            "botId": 42726
                                        },
                                        "type": 1
                                    },
                                    "content": "先生/女士，您好，目前您的包裹到达xxx，预计运达时间xxx，您的运单还在正常的配送时效内，还请您耐心等待。",
                                    "customWordsVos": [
                                        {
                                            "answerId": 6613347,
                                            "sort": 1,
                                            "title": "官",
                                            "isActive": true
                                        },
                                        {
                                            "answerId": 6613347,
                                            "content": "2233",
                                            "sort": 2,
                                            "title": "12",
                                            "isActive": false
                                        },
                                        {
                                            "answerId": 6613347,
                                            "content": "1234",
                                            "sort": 3,
                                            "title": "123",
                                            "isActive": false
                                        }
                                    ],
                                    "data": {
                                        "version": "V20220830135750【测试】",
                                        "answerNodes": [
                                            "0a83ed2d2c414dd3ae34e13e0f42ea3e"
                                        ]
                                    },
                                    "messageId": "2AF01DEC33C940F0813C9C86712EF7B7",
                                    "messageTime": 1671522397456,
                                    "messageType": "CHAT_MESSAGE",
                                    "sessionId": "edfd939fc76f6818133409fb2226c302",
                                    "upMessageId": "6ed7d3ce-803a-11ed-9811-fa163ef4b505"
                                }
                            ]
                        },
                        {
                            "answerId": -1,
                            "children": [],
                            "hit": false,
                            "id": 8351071,
                            "idPath": "8350641/8351074",
                            "name": "测试规则1-2-3",
                            "namePath": "测试规则1/测试规则1-1/测试规则1-2-3",
                            "orderIndex": 3,
                            "parentId": 8351073,
                            "refCode": "a3271d0d9f9e43b3b81c8473b36b2227",
                            "type": 1,
                            "click": false
                        }
                    ],
                    "hit": true,
                    "id": 8351073,
                    "idPath": "8350641/8351073",
                    "name": "测试规则1-1",
                    "namePath": "测试规则1/测试规则1-1",
                    "orderIndex": 2,
                    "parentId": 8350641,
                    "refCode": "3d352c26c54c466b96221f41aae5671b",
                    "type": 1,
                    "click": false
                },
                {
                    "answerId": -1,
                    "children": [],
                    "hit": false,
                    "id": 8351074,
                    "idPath": "8350641/8351074",
                    "name": "测试规则1-2",
                    "namePath": "测试规则1/测试规则1-2",
                    "orderIndex": 3,
                    "parentId": 8350641,
                    "refCode": "a3271d0d9f9e43b3b81c8473b36b2227",
                    "type": 1,
                    "click": true,
                    "answers": [
                        {
                            "answerInfo": {
                                "answerId": 6613347,
                                "answerTypes": [],
                                "classifierId": 1361021,
                                "classifierNodeId": 8361391,
                                "extraData": {
                                    "clientType": "WEB",
                                    "eventSummary": "[]",
                                    "isShortMessage": false,
                                    "botId": 42726
                                },
                                "type": 1
                            },
                            "content": "先生/女士，您好，目前您的包裹到达xxx，预计运达时间xxx，您的运单还在正常的配送时效内，还请您耐心等待。",
                            "customWordsVos": [
                                {
                                    "answerId": 6613347,
                                    "sort": 1,
                                    "title": "官",
                                    "isActive": true
                                },
                                {
                                    "answerId": 6613347,
                                    "content": "2233",
                                    "sort": 2,
                                    "title": "12",
                                    "isActive": false
                                },
                                {
                                    "answerId": 6613347,
                                    "content": "1234",
                                    "sort": 3,
                                    "title": "123",
                                    "isActive": false
                                }
                            ],
                            "data": {
                                "version": "V20220830135750【测试】",
                                "answerNodes": [
                                    "0a83ed2d2c414dd3ae34e13e0f42ea3e"
                                ]
                            },
                            "messageId": "2AF01DEC33C940F0813C9C86712EF7B7",
                            "messageTime": 1671522397456,
                            "messageType": "CHAT_MESSAGE",
                            "sessionId": "edfd939fc76f6818133409fb2226c302",
                            "upMessageId": "6ed7d3ce-803a-11ed-9811-fa163ef4b505"
                        }
                    ]
                }
            ],
            "hit": true,
            "id": 8350641,
            "idPath": "8350641",
            "name": "测试规则1",
            "namePath": "测试规则1",
            "orderIndex": 1,
            "parentId": -1,
            "refCode": "420e5867fac04071b5d2705c59e4e14b",
            "type": 1
        },
        {
            "answerId": -1,
            "children": [],
            "hit": false,
            "id": 8350643,
            "idPath": "8350643",
            "name": "测试规则2",
            "namePath": "测试规则2",
            "orderIndex": 2,
            "parentId": -1,
            "refCode": "cea8431439b940429bfc306e7bb93995",
            "type": 1,
            "answers": [
                {
                    "answerInfo": {
                        "answerId": 6613347,
                        "answerTypes": [],
                        "classifierId": 1361021,
                        "classifierNodeId": 8361391,
                        "extraData": {
                            "clientType": "WEB",
                            "eventSummary": "[]",
                            "isShortMessage": false,
                            "botId": 42726
                        },
                        "type": 1
                    },
                    "content": "先生/女士，您好，目前您的包裹到达xxx，预计运达时间xxx，您的运单还在正常的配送时效内，还请您耐心等待。",
                    "customWordsVos": [
                        {
                            "answerId": 6613347,
                            "sort": 1,
                            "title": "官",
                            "isActive": true
                        },
                        {
                            "answerId": 6613347,
                            "content": "2233",
                            "sort": 2,
                            "title": "12",
                            "isActive": false
                        },
                        {
                            "answerId": 6613347,
                            "content": "1234",
                            "sort": 3,
                            "title": "123",
                            "isActive": false
                        }
                    ],
                    "data": {
                        "version": "V20220830135750【测试】",
                        "answerNodes": [
                            "0a83ed2d2c414dd3ae34e13e0f42ea3e"
                        ]
                    },
                    "messageId": "2AF01DEC33C940F0813C9C86712EF7B7",
                    "messageTime": 1671522397456,
                    "messageType": "CHAT_MESSAGE",
                    "sessionId": "edfd939fc76f6818133409fb2226c302",
                    "upMessageId": "6ed7d3ce-803a-11ed-9811-fa163ef4b505"
                }
            ]
        },
        {
            "answerId": -1,
            "children": [],
            "hit": false,
            "id": 8351059,
            "idPath": "8351059",
            "name": "测试规则3",
            "namePath": "测试规则3",
            "orderIndex": 3,
            "parentId": -1,
            "refCode": "9680d085cbd442d4957b1c8bb5cafb99",
            "type": 1
        }
    ]
    console.log("arr", arr)

    const upadeNodeActive = (data, id, index, values) => {
        const _array = data;
        for (let i = 0; i < _array.length; i++) {
            if (_array[i].id === id) {
                const curData = _array[i];
                curData?.answers?.forEach((a) => {
                    a?.customWordsVos?.forEach?.((e, i) => {
                        e.isActive = i === index;
                        if (i === index) {
                            if (values) {
                                e.title = values?.title
                                e.content = values?.content
                            }
                        }
                    });
                });

                return _array;
            } else if (_array[i].children?.length) {
                _array[i].children = upadeNodeActive(_array[i].children, id, index, values);
            }
        }
        return _array;
    };

    const res1 = upadeNodeActive(arr, 8350643, 1)
    console.log("res1", res1)
    const res2 = upadeNodeActive(arr, 8351072, 2)
    console.log("res2", res2)
</script>